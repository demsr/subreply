{% extends "base.html" %}

{% if view in ['following', 'followers', 'lobby', 'people', 'trending'] %}
    {% set limit = 24 %}
{% else %}
    {% set limit = 16 %}
{% endif %}

{% block main %}
    {% if view == 'feed' %}
        {% include "input/thread.html" %}
    {% elif view in ['discover', 'people'] %}
        {% include "input/query.html" %}
    {% elif view == 'saved' %}
        <div class="title">
            <a href="/{{ member }}">{{ member.first_name }}</a>
            <a href="/{{ member }}/saved" class="on">Saved</a>
        </div>
    {% endif %}

    <div class="list">
        {% if view == 'profile' %}
            {% include "common/user.html" %}
            {% include "common/status.html" %}
        {% elif view in ['news', 'read'] and count %}
            {% include "common/readership.html" %}
        {% endif %}

        {% for entry in entries %}
            {% if view in ['lobby', 'people'] %}
                {% set member = entry %}
                {% include "common/user.html" %}
            {% elif view == 'following' %}
                {% set member = entry.to_user %}
                {% include "common/user.html" %}
            {% elif view == 'followers' %}
                {% set member = entry.created_by %}
                {% include "common/user.html" %}
            {% elif view in ['news', 'read'] %}
                {% include "common/article.html" %}
            {% elif view == 'trending' %}
                {% include "common/threads.html" %}
            {% else %}
                {% include "common/stream.html" %}
            {% endif %}
        {% else %}
            {% include "common/nothing.html" %}
        {% endfor %}

        {% if not q and entries | length == limit %}
            <div class="entry">
                <div class="load">
                    <a onclick="getPage(event)" data-page="{{ number + 1 }}">Load more</a>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
